"use strict";(()=>{var e={};e.id=772,e.ids=[772],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4433:(e,s,r)=>{r.r(s),r.d(s,{patchFetch:()=>R,routeModule:()=>l,serverHooks:()=>d,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>A});var i={};r.r(i),r.d(i,{GET:()=>E,PUT:()=>m});var n=r(2412),p=r(4293),t=r(4147),a=r(7856),o=r(2391),u=r(4871);async function E(e){try{let{searchParams:s}=new URL(e.url),r=s.get("userId");if(!r)return a.NextResponse.json({error:"User ID is required"},{status:400});let i=await u.db.userNotificationPreferences.findUnique({where:{userId:r}});if(!i)return a.NextResponse.json({userId:r,emailEnabled:!0,smsEnabled:!1,inAppEnabled:!0,pushEnabled:!1,quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00",timezone:"UTC"},notificationTypes:{SESSION_SCHEDULED:{email:!0,sms:!1,inApp:!0,push:!1},SESSION_REMINDER_24H:{email:!0,sms:!0,inApp:!0,push:!1},SESSION_REMINDER_2H:{email:!0,sms:!0,inApp:!0,push:!0},SESSION_REMINDER_15M:{email:!1,sms:!0,inApp:!0,push:!0},SESSION_CANCELLED:{email:!0,sms:!0,inApp:!0,push:!0},SESSION_RESCHEDULED:{email:!0,sms:!0,inApp:!0,push:!0},SESSION_COMPLETED:{email:!0,sms:!1,inApp:!0,push:!1},MILESTONE_REACHED:{email:!0,sms:!1,inApp:!0,push:!1},PROGRESS_UPDATE:{email:!1,sms:!1,inApp:!0,push:!1},CERTIFICATION_ELIGIBLE:{email:!0,sms:!0,inApp:!0,push:!0},CERTIFICATION_COMPLETED:{email:!0,sms:!0,inApp:!0,push:!0},DOCUMENT_UPLOADED:{email:!1,sms:!1,inApp:!0,push:!1},DOCUMENT_APPROVED:{email:!0,sms:!1,inApp:!0,push:!1},DOCUMENT_REJECTED:{email:!0,sms:!0,inApp:!0,push:!0},DOCUMENT_REVIEW_REQUIRED:{email:!0,sms:!1,inApp:!0,push:!1},SYSTEM_MAINTENANCE:{email:!0,sms:!1,inApp:!0,push:!1},SYSTEM_UPDATE:{email:!0,sms:!1,inApp:!0,push:!1},SECURITY_ALERT:{email:!0,sms:!0,inApp:!0,push:!0},NEW_BOOKING:{email:!0,sms:!1,inApp:!0,push:!1},SESSION_VERIFICATION_REQUIRED:{email:!0,sms:!1,inApp:!0,push:!1},PAYMENT_PROCESSED:{email:!0,sms:!1,inApp:!0,push:!1},USER_REGISTRATION:{email:!1,sms:!1,inApp:!1,push:!1},SYSTEM_ALERT:{email:!0,sms:!1,inApp:!0,push:!1},PERFORMANCE_METRIC:{email:!1,sms:!1,inApp:!1,push:!1}}});return a.NextResponse.json(i)}catch(e){return console.error("Error fetching notification preferences:",e),a.NextResponse.json({error:"Failed to fetch notification preferences"},{status:500})}}async function m(e){try{let{userId:s,...r}=await e.json();if(!s)return a.NextResponse.json({error:"User ID is required"},{status:400});return await o.BF.updateUserPreferences(s,r),a.NextResponse.json({success:!0,message:"Notification preferences updated successfully"})}catch(e){return console.error("Error updating notification preferences:",e),a.NextResponse.json({error:"Failed to update notification preferences"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:p.RouteKind.APP_ROUTE,page:"/api/notifications/preferences/route",pathname:"/api/notifications/preferences",filename:"route",bundlePath:"app/api/notifications/preferences/route"},resolvedPagePath:"/Users/dgb_1011/Desktop/WeIn/WeIn/wein/src/app/api/notifications/preferences/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:c,workUnitAsyncStorage:A,serverHooks:d}=l;function R(){return(0,t.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:A})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),i=s.X(0,[267,814,991],()=>r(4433));module.exports=i})();