(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{1974:(e,t,s)=>{Promise.resolve().then(s.bind(s,4871))},7138:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(231),a=s.n(r)},6463:(e,t,s)=>{"use strict";var r=s(1169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},4871:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(7437),a=s(2265),o=s(6463),n=s(7138);function l(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[d,i]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[m,g]=(0,a.useState)("");(0,o.useRouter)();let h=async t=>{t.preventDefault(),console.log("Login form submitted with:",{email:e,password:s}),i(!0),u(""),g("");try{console.log("Making API request to /api/auth");let t=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s,action:"login"})});console.log("API response status:",t.status);let r=await t.json();console.log("API response data:",r),t.ok?(console.log("Login successful, storing data and redirecting"),localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),g("Login successful! Redirecting..."),setTimeout(()=>{switch(r.user.userType){case"STUDENT":console.log("Redirecting to student dashboard"),window.location.href="/dashboard/student";break;case"CONSULTANT":console.log("Redirecting to consultant dashboard"),window.location.href="/dashboard/consultant";break;case"ADMIN":console.log("Redirecting to admin dashboard"),window.location.href="/dashboard/admin";break;default:console.log("Redirecting to default dashboard"),window.location.href="/dashboard"}},1e3)):(console.log("Login failed:",r.error),u(r.error||"Login failed. Please try again."))}catch(e){console.error("Login error:",e),u("Network error. Please check your connection and try again.")}finally{i(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"mx-auto w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)("span",{className:"text-white font-bold text-xl",children:"B"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Welcome Back"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Sign in to your BrainBased EMDR account"})]}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[c&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c}),m&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:m}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),required:!0,disabled:d})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password",value:s,onChange:e=>l(e.target.value),required:!0,disabled:d})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:d,children:d?"Signing in...":"Sign In"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(n.default,{href:"/auth/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Create one here"})]})}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)(n.default,{href:"/",className:"text-sm text-gray-500 hover:text-gray-700",children:"â† Back to Home"})})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[231,130,215,744],()=>t(1974)),_N_E=e.O()}]);