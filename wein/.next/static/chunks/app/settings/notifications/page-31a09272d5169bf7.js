(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{1026:(e,t,s)=>{Promise.resolve().then(s.bind(s,699))},699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var i,n,a,o,r=s(7437),l=s(2265),d=s(9733),c=s(8185),u=s(9646),m=s(9354);let p=l.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(u.fC,{className:(0,m.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...i,ref:t,children:(0,r.jsx)(u.bU,{className:(0,m.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});p.displayName=u.fC.displayName;var h=s(402),f=s(7209),E=s(9888),N=s(8484);let S=l.forwardRef((e,t)=>{let{className:s,orientation:i="horizontal",decorative:n=!0,...a}=e;return(0,r.jsx)(N.f,{ref:t,decorative:n,orientation:i,className:(0,m.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",s),...a})});S.displayName=N.f.displayName;var g=s(9055),x=s(4109),y=s(9061),b=s(6600),I=s(4086),v=s(7390),R=s(8400),T=s(933),_=s(7090);let j=null!==(i=globalThis.prisma)&&void 0!==i?i:new _.PrismaClient;!function(e){e.SESSION_SCHEDULED="SESSION_SCHEDULED",e.SESSION_REMINDER_24H="SESSION_REMINDER_24H",e.SESSION_REMINDER_2H="SESSION_REMINDER_2H",e.SESSION_REMINDER_15M="SESSION_REMINDER_15M",e.SESSION_CANCELLED="SESSION_CANCELLED",e.SESSION_RESCHEDULED="SESSION_RESCHEDULED",e.SESSION_COMPLETED="SESSION_COMPLETED",e.MILESTONE_REACHED="MILESTONE_REACHED",e.PROGRESS_UPDATE="PROGRESS_UPDATE",e.CERTIFICATION_ELIGIBLE="CERTIFICATION_ELIGIBLE",e.CERTIFICATION_COMPLETED="CERTIFICATION_COMPLETED",e.DOCUMENT_UPLOADED="DOCUMENT_UPLOADED",e.DOCUMENT_APPROVED="DOCUMENT_APPROVED",e.DOCUMENT_REJECTED="DOCUMENT_REJECTED",e.DOCUMENT_REVIEW_REQUIRED="DOCUMENT_REVIEW_REQUIRED",e.SYSTEM_MAINTENANCE="SYSTEM_MAINTENANCE",e.SYSTEM_UPDATE="SYSTEM_UPDATE",e.SECURITY_ALERT="SECURITY_ALERT",e.NEW_BOOKING="NEW_BOOKING",e.SESSION_VERIFICATION_REQUIRED="SESSION_VERIFICATION_REQUIRED",e.PAYMENT_PROCESSED="PAYMENT_PROCESSED",e.USER_REGISTRATION="USER_REGISTRATION",e.SYSTEM_ALERT="SYSTEM_ALERT",e.PERFORMANCE_METRIC="PERFORMANCE_METRIC"}(n||(n={})),function(e){e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.URGENT="URGENT"}(a||(a={})),function(e){e.EMAIL="EMAIL",e.SMS="SMS",e.IN_APP="IN_APP",e.PUSH="PUSH"}(o||(o={}));class C{initializeTemplates(){this.templates.set("SESSION_SCHEDULED",{id:"session_scheduled",type:"SESSION_SCHEDULED",subject:"Consultation Session Scheduled",body:"\n        <h2>Your consultation session has been scheduled!</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Your consultation session with {{consultantName}} has been scheduled for:</p>\n        <ul>\n          <li><strong>Date:</strong> {{sessionDate}}</li>\n          <li><strong>Time:</strong> {{sessionTime}}</li>\n          <li><strong>Duration:</strong> {{duration}} minutes</li>\n        </ul>\n        <p>You can join the session 5 minutes before the scheduled time.</p>\n        <p>If you need to reschedule, please contact us at least 24 hours in advance.</p>\n      ",smsBody:"Your consultation session with {{consultantName}} is scheduled for {{sessionDate}} at {{sessionTime}}. Join 5 min early.",variables:["firstName","consultantName","sessionDate","sessionTime","duration"]}),this.templates.set("SESSION_REMINDER_24H",{id:"session_reminder_24h",type:"SESSION_REMINDER_24H",subject:"Reminder: Consultation Session Tomorrow",body:"\n        <h2>Reminder: Your consultation session is tomorrow</h2>\n        <p>Hello {{firstName}},</p>\n        <p>This is a friendly reminder that your consultation session is scheduled for tomorrow:</p>\n        <ul>\n          <li><strong>Date:</strong> {{sessionDate}}</li>\n          <li><strong>Time:</strong> {{sessionTime}}</li>\n          <li><strong>Consultant:</strong> {{consultantName}}</li>\n        </ul>\n        <p>Please ensure you have a stable internet connection and are in a quiet environment.</p>\n      ",smsBody:"Reminder: Your consultation session with {{consultantName}} is tomorrow at {{sessionTime}}.",variables:["firstName","consultantName","sessionDate","sessionTime"]}),this.templates.set("SESSION_REMINDER_2H",{id:"session_reminder_2h",type:"SESSION_REMINDER_2H",subject:"Reminder: Consultation Session in 2 Hours",body:"\n        <h2>Your consultation session starts in 2 hours</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Your consultation session with {{consultantName}} starts in 2 hours at {{sessionTime}}.</p>\n        <p>Please prepare your environment and ensure you're ready for the session.</p>\n      ",smsBody:"Your consultation session with {{consultantName}} starts in 2 hours at {{sessionTime}}.",variables:["firstName","consultantName","sessionTime"]}),this.templates.set("SESSION_REMINDER_15M",{id:"session_reminder_15m",type:"SESSION_REMINDER_15M",subject:"Your consultation session starts in 15 minutes",body:"\n        <h2>Session starting soon!</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Your consultation session with {{consultantName}} starts in 15 minutes.</p>\n        <p>You can now join the session room.</p>\n      ",smsBody:"Your consultation session with {{consultantName}} starts in 15 minutes. Join now.",variables:["firstName","consultantName"]}),this.templates.set("MILESTONE_REACHED",{id:"milestone_reached",type:"MILESTONE_REACHED",subject:"Congratulations! You've reached a milestone",body:"\n        <h2>\uD83C\uDF89 Milestone Achieved!</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Congratulations! You've reached {{milestoneName}} with {{hoursCompleted}} hours completed.</p>\n        <p>You're making excellent progress toward your certification!</p>\n      ",smsBody:"\uD83C\uDF89 Congratulations! You've reached {{milestoneName}} with {{hoursCompleted}} hours completed.",variables:["firstName","milestoneName","hoursCompleted"]}),this.templates.set("CERTIFICATION_ELIGIBLE",{id:"certification_eligible",type:"CERTIFICATION_ELIGIBLE",subject:"You're eligible for certification!",body:"\n        <h2>\uD83C\uDF93 Certification Eligibility</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Great news! You've completed all requirements and are now eligible for certification.</p>\n        <p>Your certificate will be generated and sent to you within 24 hours.</p>\n      ",smsBody:"\uD83C\uDF93 Great news! You're eligible for certification. Your certificate will be sent within 24 hours.",variables:["firstName"]}),this.templates.set("DOCUMENT_APPROVED",{id:"document_approved",type:"DOCUMENT_APPROVED",subject:"Document Approved",body:'\n        <h2>Document Approved</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Your document "{{documentName}}" has been approved.</p>\n        <p>This brings you one step closer to certification!</p>\n      ',smsBody:'Your document "{{documentName}}" has been approved.',variables:["firstName","documentName"]}),this.templates.set("DOCUMENT_REJECTED",{id:"document_rejected",type:"DOCUMENT_REJECTED",subject:"Document Review Required",body:'\n        <h2>Document Review Required</h2>\n        <p>Hello {{firstName}},</p>\n        <p>Your document "{{documentName}}" requires revisions.</p>\n        <p><strong>Feedback:</strong> {{feedback}}</p>\n        <p>Please review and resubmit the document.</p>\n      ',smsBody:'Your document "{{documentName}}" requires revisions. Check your email for details.',variables:["firstName","documentName","feedback"]}),this.templates.set("NEW_BOOKING",{id:"new_booking",type:"NEW_BOOKING",subject:"New Session Booking",body:"\n        <h2>New Session Booking</h2>\n        <p>Hello {{consultantName}},</p>\n        <p>You have a new consultation session booked:</p>\n        <ul>\n          <li><strong>Student:</strong> {{studentName}}</li>\n          <li><strong>Date:</strong> {{sessionDate}}</li>\n          <li><strong>Time:</strong> {{sessionTime}}</li>\n          <li><strong>Duration:</strong> {{duration}} minutes</li>\n        </ul>\n      ",smsBody:"New booking: {{studentName}} on {{sessionDate}} at {{sessionTime}}.",variables:["consultantName","studentName","sessionDate","sessionTime","duration"]}),this.templates.set("SESSION_VERIFICATION_REQUIRED",{id:"session_verification_required",type:"SESSION_VERIFICATION_REQUIRED",subject:"Session Verification Required",body:"\n        <h2>Session Verification Required</h2>\n        <p>Hello {{consultantName}},</p>\n        <p>Please verify your recent session with {{studentName}} on {{sessionDate}}.</p>\n        <p>This helps ensure accurate progress tracking and payment processing.</p>\n      ",smsBody:"Please verify your session with {{studentName}} on {{sessionDate}}.",variables:["consultantName","studentName","sessionDate"]})}async sendNotification(e){try{let t=await j.user.findUnique({where:{id:e.userId},include:{student:!0,consultant:!0,admin:!0}});if(!t)throw Error("User not found: ".concat(e.userId));let s=await this.getUserNotificationPreferences(e.userId);if(this.isInQuietHours(s)){console.log("Skipping notification during quiet hours for user ".concat(e.userId));return}let i=[];s.emailEnabled&&this.shouldSendEmail(e.type,s)&&i.push(this.sendEmailNotification(t,e)),s.smsEnabled&&this.shouldSendSMS(e.type,s)&&i.push(this.sendSMSNotification(t,e)),s.inAppEnabled&&this.shouldSendInApp(e.type,s)&&i.push(this.createInAppNotification(e)),await Promise.all(i),await this.logNotification(e)}catch(e){throw console.error("Error sending notification:",e),e}}async sendBulkNotifications(e){let t=e.map(e=>this.sendNotification(e));await Promise.all(t)}async scheduleNotification(e,t){await j.scheduledNotification.create({data:{userId:e.userId,type:e.type,title:e.title,message:e.message,data:e.data,priority:e.priority,scheduledFor:t,status:"PENDING"}})}async sendSessionNotifications(e){let t=await j.consultationSession.findUnique({where:{id:e},include:{student:{include:{user:!0}},consultant:{include:{user:!0}}}});if(!t)throw Error("Session not found: ".concat(e));let s=new Date(t.scheduledStart),i=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"UTC"});for(let e of(await this.sendNotification({userId:t.student.user.id,type:"SESSION_SCHEDULED",title:"Session Scheduled",message:"Your consultation session with ".concat(t.consultant.user.firstName," ").concat(t.consultant.user.lastName," has been scheduled for ").concat(s.toLocaleDateString()," at ").concat(i,"."),data:{sessionId:t.id,consultantName:"".concat(t.consultant.user.firstName," ").concat(t.consultant.user.lastName),sessionDate:s.toLocaleDateString(),sessionTime:i,duration:Math.round((t.scheduledEnd.getTime()-t.scheduledStart.getTime())/6e4)},priority:"NORMAL"}),await this.sendNotification({userId:t.consultant.user.id,type:"NEW_BOOKING",title:"New Session Booking",message:"New consultation session booked with ".concat(t.student.user.firstName," ").concat(t.student.user.lastName," on ").concat(s.toLocaleDateString()," at ").concat(i,"."),data:{sessionId:t.id,studentName:"".concat(t.student.user.firstName," ").concat(t.student.user.lastName),sessionDate:s.toLocaleDateString(),sessionTime:i,duration:Math.round((t.scheduledEnd.getTime()-t.scheduledStart.getTime())/6e4)},priority:"NORMAL"}),[{hours:24,type:"SESSION_REMINDER_24H"},{hours:2,type:"SESSION_REMINDER_2H"},{minutes:15,type:"SESSION_REMINDER_15M"}])){let s=new Date(t.scheduledStart);e.hours?s.setHours(s.getHours()-e.hours):e.minutes&&s.setMinutes(s.getMinutes()-e.minutes),s>new Date&&await this.scheduleNotification({userId:t.student.user.id,type:e.type,title:"Session Reminder",message:"Your consultation session starts ".concat(e.hours?"in ".concat(e.hours," hours"):"in 15 minutes","."),data:{sessionId:t.id},priority:"HIGH"},s)}}async sendMilestoneNotification(e,t,s){await this.sendNotification({userId:e,type:"MILESTONE_REACHED",title:"Milestone Achieved!",message:"Congratulations! You've reached ".concat(t," with ").concat(s," hours completed."),data:{milestoneName:t,hoursCompleted:s},priority:"NORMAL"})}async sendCertificationEligibleNotification(e){await this.sendNotification({userId:e,type:"CERTIFICATION_ELIGIBLE",title:"Certification Eligible!",message:"Great news! You've completed all requirements and are now eligible for certification.",data:{},priority:"HIGH"})}async sendDocumentNotification(e,t,s,i){await this.sendNotification({userId:e,type:"approved"===s?"DOCUMENT_APPROVED":"DOCUMENT_REJECTED",title:"Document ".concat("approved"===s?"Approved":"Review Required"),message:"approved"===s?'Your document "'.concat(t,'" has been approved.'):'Your document "'.concat(t,'" requires revisions.'),data:{documentName:t,feedback:i},priority:"NORMAL"})}async sendEmailNotification(e,t){let s=this.templates.get(t.type);if(!s){console.warn("No email template found for notification type: ".concat(t.type));return}let i=this.processTemplate(s,t.data||{}),n=s.subject;console.log("Sending email notification:",{to:e.email,subject:n,body:i})}async sendSMSNotification(e,t){let s=this.templates.get(t.type);if(!(null==s?void 0:s.smsBody)){console.warn("No SMS template found for notification type: ".concat(t.type));return}let i=this.processTemplate(s,t.data||{},"smsBody");console.log("Sending SMS notification:",{to:e.phone,message:i})}async createInAppNotification(e){await j.inAppNotification.create({data:{userId:e.userId,title:e.title,message:e.message,type:e.type,data:e.data,read:!1}})}async getUserNotificationPreferences(e){return await j.userNotificationPreferences.findUnique({where:{userId:e}})||{userId:e,emailEnabled:!0,smsEnabled:!1,inAppEnabled:!0,pushEnabled:!1,quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00",timezone:"UTC"},notificationTypes:this.getDefaultNotificationTypes()}}getDefaultNotificationTypes(){let e={};return Object.values(n).forEach(t=>{e[t]={email:!0,sms:!1,inApp:!0,push:!1}}),e}isInQuietHours(e){if(!e.quietHours.enabled)return!1;let t=new Date,s=e.quietHours.timezone||"UTC",i=new Date(t.toLocaleString("en-US",{timeZone:s})),n=60*i.getHours()+i.getMinutes(),a=this.parseTimeString(e.quietHours.startTime),o=this.parseTimeString(e.quietHours.endTime);return a<=o?n>=a&&n<=o:n>=a||n<=o}parseTimeString(e){let[t,s]=e.split(":").map(Number);return 60*t+s}shouldSendEmail(e,t){var s,i;return null===(i=null===(s=t.notificationTypes[e])||void 0===s?void 0:s.email)||void 0===i||i}shouldSendSMS(e,t){var s,i;return null!==(i=null===(s=t.notificationTypes[e])||void 0===s?void 0:s.sms)&&void 0!==i&&i}shouldSendInApp(e,t){var s,i;return null===(i=null===(s=t.notificationTypes[e])||void 0===s?void 0:s.inApp)||void 0===i||i}processTemplate(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body",i=e[s]||e.body;return e.variables.forEach(e=>{let s=t[e]||"{{".concat(e,"}}"),n=RegExp("{{".concat(e,"}}"),"g");i=i.replace(n,s)}),i}async logNotification(e){await j.notificationLog.create({data:{userId:e.userId,type:e.type,title:e.title,message:e.message,data:e.data,priority:e.priority,sentAt:new Date}})}async getUserNotifications(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(await j.inAppNotification.findMany({where:{userId:e},orderBy:{createdAt:"desc"},take:t,skip:s})).map(e=>({userId:e.userId,title:e.title,message:e.message,type:e.type,data:e.data,read:e.read,createdAt:e.createdAt}))}async markNotificationAsRead(e){await j.inAppNotification.update({where:{id:e},data:{read:!0}})}async markAllNotificationsAsRead(e){await j.inAppNotification.updateMany({where:{userId:e,read:!1},data:{read:!0}})}async getUnreadNotificationCount(e){return await j.inAppNotification.count({where:{userId:e,read:!1}})}async updateUserPreferences(e,t){await j.userNotificationPreferences.upsert({where:{userId:e},update:t,create:{userId:e,...t}})}constructor(){this.templates=new Map,this.initializeTemplates()}}new C;let w={SESSION_SCHEDULED:"Session Scheduled",SESSION_REMINDER_24H:"24 Hour Reminder",SESSION_REMINDER_2H:"2 Hour Reminder",SESSION_REMINDER_15M:"15 Minute Reminder",SESSION_CANCELLED:"Session Cancelled",SESSION_RESCHEDULED:"Session Rescheduled",SESSION_COMPLETED:"Session Completed",MILESTONE_REACHED:"Milestone Reached",PROGRESS_UPDATE:"Progress Update",CERTIFICATION_ELIGIBLE:"Certification Eligible",CERTIFICATION_COMPLETED:"Certification Completed",DOCUMENT_UPLOADED:"Document Uploaded",DOCUMENT_APPROVED:"Document Approved",DOCUMENT_REJECTED:"Document Rejected",DOCUMENT_REVIEW_REQUIRED:"Document Review Required",SYSTEM_MAINTENANCE:"System Maintenance",SYSTEM_UPDATE:"System Update",SECURITY_ALERT:"Security Alert",NEW_BOOKING:"New Booking",SESSION_VERIFICATION_REQUIRED:"Session Verification Required",PAYMENT_PROCESSED:"Payment Processed",USER_REGISTRATION:"User Registration",SYSTEM_ALERT:"System Alert",PERFORMANCE_METRIC:"Performance Metric"},D={"Session Management":[n.SESSION_SCHEDULED,n.SESSION_REMINDER_24H,n.SESSION_REMINDER_2H,n.SESSION_REMINDER_15M,n.SESSION_CANCELLED,n.SESSION_RESCHEDULED,n.SESSION_COMPLETED],"Progress & Certification":[n.MILESTONE_REACHED,n.PROGRESS_UPDATE,n.CERTIFICATION_ELIGIBLE,n.CERTIFICATION_COMPLETED],Documents:[n.DOCUMENT_UPLOADED,n.DOCUMENT_APPROVED,n.DOCUMENT_REJECTED,n.DOCUMENT_REVIEW_REQUIRED],"System & Security":[n.SYSTEM_MAINTENANCE,n.SYSTEM_UPDATE,n.SECURITY_ALERT,n.SYSTEM_ALERT],Consultant:[n.NEW_BOOKING,n.SESSION_VERIFICATION_REQUIRED,n.PAYMENT_PROCESSED]};function O(){let{user:e}=function(){let[e,t]=(0,l.useState)(null),[s,i]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=localStorage.getItem("user"),s=localStorage.getItem("token");if(e&&s)try{let s=JSON.parse(e);t(s)}catch(e){console.error("Error parsing user data:",e),localStorage.removeItem("user"),localStorage.removeItem("token")}i(!1)},[]);let n=async(e,s)=>{try{let i=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s,action:"login"})});if(!i.ok)throw Error("Login failed");let n=await i.json();return localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("token",n.token),t(n.user),n}catch(e){throw console.error("Login error:",e),e}},a=async e=>{try{let s=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,action:"register"})});if(!s.ok)throw Error("Registration failed");let i=await s.json();return localStorage.setItem("user",JSON.stringify(i.user)),localStorage.setItem("token",i.token),t(i.user),i}catch(e){throw console.error("Registration error:",e),e}},o=!!e,r=(null==e?void 0:e.userType)==="STUDENT",d=(null==e?void 0:e.userType)==="CONSULTANT",c=(null==e?void 0:e.userType)==="ADMIN";return{user:e,loading:s,login:n,register:a,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t(null)},isAuthenticated:o,isStudent:r,isConsultant:d,isAdmin:c}}(),[t,s]=(0,l.useState)(null),[i,n]=(0,l.useState)(!0),[a,o]=(0,l.useState)(!1),[u,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{(null==e?void 0:e.id)&&N()},[null==e?void 0:e.id]);let N=async()=>{try{n(!0);let t=await fetch("/api/notifications/preferences?userId=".concat(null==e?void 0:e.id));if(!t.ok)throw Error("Failed to fetch preferences");let i=await t.json();s(i)}catch(e){console.error("Error fetching preferences:",e),m("Failed to load notification preferences")}finally{n(!1)}},_=async()=>{if(t&&(null==e?void 0:e.id))try{if(o(!0),!(await fetch("/api/notifications/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,emailEnabled:t.emailEnabled,smsEnabled:t.smsEnabled,inAppEnabled:t.inAppEnabled,pushEnabled:t.pushEnabled,quietHours:t.quietHours,notificationTypes:t.notificationTypes})})).ok)throw Error("Failed to save preferences");console.log("Preferences saved successfully")}catch(e){console.error("Error saving preferences:",e),m("Failed to save preferences")}finally{o(!1)}},j=(e,i)=>{t&&s(t=>t?{...t,[e]:i}:null)},C=(e,i,n)=>{t&&s(t=>t?{...t,notificationTypes:{...t.notificationTypes,[e]:{...t.notificationTypes[e],[i]:n}}}:null)},O=(e,i)=>{t&&s(t=>t?{...t,quietHours:{...t.quietHours,[e]:i}}:null)};return i?(0,r.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,r.jsx)(x.Z,{className:"h-6 w-6 animate-spin"}),(0,r.jsx)("span",{className:"ml-2",children:"Loading preferences..."})]}):u?(0,r.jsx)("div",{className:"p-4 text-center text-red-500",children:u}):t?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Notification Preferences"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Configure how and when you receive notifications"})]}),(0,r.jsx)(d.z,{onClick:_,disabled:a,children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5"}),"Notification Channels"]}),(0,r.jsx)(c.SZ,{children:"Choose how you want to receive notifications"})]}),(0,r.jsxs)(c.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(I.Z,{className:"h-5 w-5 text-blue-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"email-enabled",children:"Email Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Receive notifications via email"})]})]}),(0,r.jsx)(p,{id:"email-enabled",checked:t.emailEnabled,onCheckedChange:e=>j("emailEnabled",e)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 text-green-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"inapp-enabled",children:"In-App Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Show notifications within the application"})]})]}),(0,r.jsx)(p,{id:"inapp-enabled",checked:t.inAppEnabled,onCheckedChange:e=>j("inAppEnabled",e)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(R.Z,{className:"h-5 w-5 text-purple-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"sms-enabled",children:"SMS Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Receive text message notifications"})]})]}),(0,r.jsx)(p,{id:"sms-enabled",checked:t.smsEnabled,onCheckedChange:e=>j("smsEnabled",e)})]})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(T.Z,{className:"h-5 w-5"}),"Quiet Hours"]}),(0,r.jsx)(c.SZ,{children:"Set times when you don't want to receive notifications"})]}),(0,r.jsxs)(c.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(h._,{htmlFor:"quiet-hours-enabled",children:"Enable Quiet Hours"}),(0,r.jsx)(p,{id:"quiet-hours-enabled",checked:t.quietHours.enabled,onCheckedChange:e=>O("enabled",e)})]}),t.quietHours.enabled&&(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"start-time",children:"Start Time"}),(0,r.jsx)(f.I,{id:"start-time",type:"time",value:t.quietHours.startTime,onChange:e=>O("startTime",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"end-time",children:"End Time"}),(0,r.jsx)(f.I,{id:"end-time",type:"time",value:t.quietHours.endTime,onChange:e=>O("endTime",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"timezone",children:"Timezone"}),(0,r.jsxs)(E.Ph,{value:t.quietHours.timezone,onValueChange:e=>O("timezone",e),children:[(0,r.jsx)(E.i4,{children:(0,r.jsx)(E.ki,{})}),(0,r.jsxs)(E.Bw,{children:[(0,r.jsx)(E.Ql,{value:"UTC",children:"UTC"}),(0,r.jsx)(E.Ql,{value:"America/New_York",children:"Eastern Time"}),(0,r.jsx)(E.Ql,{value:"America/Chicago",children:"Central Time"}),(0,r.jsx)(E.Ql,{value:"America/Denver",children:"Mountain Time"}),(0,r.jsx)(E.Ql,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsx)(c.ll,{children:"Notification Types"}),(0,r.jsx)(c.SZ,{children:"Choose which types of notifications you want to receive"})]}),(0,r.jsx)(c.aY,{children:Object.entries(D).map(e=>{let[s,i]=e;return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:s}),(0,r.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(h._,{className:"font-medium",children:w[e]}),(0,r.jsx)(g.C,{variant:"outline",className:"text-xs",children:e})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{checked:t.notificationTypes[e].email,onCheckedChange:t=>C(e,"email",t),disabled:!t.emailEnabled}),(0,r.jsx)(h._,{className:"text-xs",children:"Email"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{checked:t.notificationTypes[e].inApp,onCheckedChange:t=>C(e,"inApp",t),disabled:!t.inAppEnabled}),(0,r.jsx)(h._,{className:"text-xs",children:"In-App"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{checked:t.notificationTypes[e].sms,onCheckedChange:t=>C(e,"sms",t),disabled:!t.smsEnabled}),(0,r.jsx)(h._,{className:"text-xs",children:"SMS"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{checked:t.notificationTypes[e].push,onCheckedChange:t=>C(e,"push",t),disabled:!t.pushEnabled}),(0,r.jsx)(h._,{className:"text-xs",children:"Push"})]})]})]},e))}),(0,r.jsx)(S,{className:"mt-4"})]},s)})})]})]}):(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No preferences found"})}var A=s(4258);function M(){return(0,r.jsxs)("div",{className:"container mx-auto py-8 max-w-4xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(b.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Notification Settings"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Customize how and when you receive notifications from the BrainBased EMDR platform."})]}),(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(A.Z,{className:"h-5 w-5"}),"Quick Overview"]}),(0,r.jsx)(c.SZ,{children:"Understand how notifications work in the platform"})]}),(0,r.jsx)(c.aY,{children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Session Notifications"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Session scheduling confirmations"}),(0,r.jsx)("li",{children:"• Reminders (24h, 2h, 15min before)"}),(0,r.jsx)("li",{children:"• Cancellation and rescheduling alerts"}),(0,r.jsx)("li",{children:"• Session completion confirmations"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Progress Notifications"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Milestone achievements"}),(0,r.jsx)("li",{children:"• Progress updates"}),(0,r.jsx)("li",{children:"• Certification eligibility"}),(0,r.jsx)("li",{children:"• Document approval status"})]})]})]})})]}),(0,r.jsx)(O,{})]})]})}},9055:(e,t,s)=>{"use strict";s.d(t,{C:()=>r});var i=s(7437);s(2265);var n=s(3027),a=s(9354);let o=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:t,variant:s,...n}=e;return(0,i.jsx)("div",{className:(0,a.cn)(o({variant:s}),t),...n})}},9733:(e,t,s)=>{"use strict";s.d(t,{z:()=>d});var i=s(7437),n=s(2265),a=s(1538),o=s(3027),r=s(9354);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:o,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,i.jsx)(u,{className:(0,r.cn)(l({variant:n,size:o,className:s})),ref:t,...c})});d.displayName="Button"},8185:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>r,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>l});var i=s(7437),n=s(2265),a=s(9354);let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});o.displayName="Card";let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...n})});r.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},7209:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var i=s(7437),n=s(2265),a=s(9354);let o=n.forwardRef((e,t)=>{let{className:s,type:n,...o}=e;return(0,i.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...o})});o.displayName="Input"},402:(e,t,s)=>{"use strict";s.d(t,{_:()=>d});var i=s(7437),n=s(2265),a=s(8364),o=s(3027),r=s(9354);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)(a.f,{ref:t,className:(0,r.cn)(l(),s),...n})});d.displayName=a.f.displayName},9888:(e,t,s)=>{"use strict";s.d(t,{Bw:()=>f,Ph:()=>c,Ql:()=>E,i4:()=>m,ki:()=>u});var i=s(7437),n=s(2265),a=s(1543),o=s(2421),r=s(4392),l=s(2468),d=s(9354);let c=a.fC;a.ZA;let u=a.B4,m=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,i.jsxs)(a.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[n,(0,i.jsx)(a.JO,{asChild:!0,children:(0,i.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=a.xz.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)(a.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,i.jsx)(r.Z,{className:"h-4 w-4"})})});p.displayName=a.u_.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)(a.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,i.jsx)(o.Z,{className:"h-4 w-4"})})});h.displayName=a.$G.displayName;let f=n.forwardRef((e,t)=>{let{className:s,children:n,position:o="popper",...r}=e;return(0,i.jsx)(a.h_,{children:(0,i.jsxs)(a.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,...r,children:[(0,i.jsx)(p,{}),(0,i.jsx)(a.l_,{className:(0,d.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,i.jsx)(h,{})]})})});f.displayName=a.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)(a.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=a.__.displayName;let E=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,i.jsxs)(a.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...o,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(a.wU,{children:(0,i.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(a.eT,{children:n})]})});E.displayName=a.ck.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,i.jsx)(a.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=a.Z0.displayName},9354:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var i=s(4839),n=s(6164);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,i.W)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[748,443,760,49,130,215,744],()=>t(1026)),_N_E=e.O()}]);